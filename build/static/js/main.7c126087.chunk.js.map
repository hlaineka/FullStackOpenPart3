{"version":3,"sources":["services/phonebook.js","App.js","index.js"],"names":["baseUrl","phonebook","getAll","axios","get","then","response","data","createPerson","newObject","post","deletePerson","PersonId","delete","updatePerson","updatedObject","put","id","Person","person","delPerson","name","number","onClick","event","NumberList","persons","filterstr","filter","obj","toLowerCase","includes","PersonsToShow","map","FilterForm","newFilter","handleFilter","value","onChange","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Notification","message","className","Error","App","useState","setPersons","setNewName","setNewNumber","setFilter","infoMessage","setInfoMessage","errorMessage","setErrorMessage","useEffect","phonebookService","initialPersons","target","preventDefault","findIndex","personObject","returnedPerson","concat","setTimeout","window","confirm","find","updatedPerson","newPersons","toDelete","catch","error","n","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7c126087.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons/'\n\nconst getAll = () => {\n\tconst request = axios.get(baseUrl)\n\treturn request.then(response => response.data)\n}\n\nconst createPerson = newObject => {\n\tconst request = axios.post(baseUrl, newObject)\n\treturn request.then(response => response.data)\n}\n\nconst deletePerson = PersonId => {\n\tconst request = axios.delete(baseUrl+PersonId)\n\treturn request.then(response => response.data)\n}\n\nconst updatePerson = updatedObject => {\n\tconst request = axios.put(baseUrl+updatedObject.id, updatedObject)\n\treturn request.then(response => response.data)\n}\n\nconst phonebook = {\n\tgetAll,\n\tcreatePerson,\n\tdeletePerson,\n\tupdatePerson\n}\n\nexport default phonebook;","import React, { useState, useEffect } from 'react'\nimport phonebookService from './services/phonebook'\nimport './index.css'\n\nconst PersonsToShow = (persons, filterstr) => (\n  persons.filter(obj => obj.name.toLowerCase().includes(filterstr.toLowerCase())))\n\nconst Person = ({person, delPerson}) => (\n    <p>{person.name} {person.number} <button onClick={(event) => delPerson(event, person.id)}>delete</button></p>)\n\nconst NumberList = ({persons, filterstr, delPerson}) => (\n    PersonsToShow(persons, filterstr).map((person) => (\n      <Person person={person} delPerson={delPerson} key={person.name}/>\n    )))\n\nconst FilterForm = ({newFilter, handleFilter}) => (\n  <div>filter shown with <input value={newFilter} onChange={handleFilter}/></div>\n)\n\nconst PersonForm = ({addPerson, newName, handleNameChange, newNumber, handleNumberChange}) => (\n  <form onSubmit={addPerson}>\n    <div>name: <input value={newName} onChange={handleNameChange}/></div>\n    <div>number: <input value={newNumber} onChange={handleNumberChange}/></div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n)\n\nconst Notification = ({message}) => {\n  if (message === null) {\n    return null\n  }\n  return (\n  <div className=\"info box\">{message}</div>)\n}\n\nconst Error = ({message}) => {\n  if (message === null) {\n    return null\n  }\n  return (\n    <div className=\"error box\">{message}</div>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setFilter ] = useState('')\n  const [ infoMessage, setInfoMessage ] = useState(null)\n  const [ errorMessage, setErrorMessage ] = useState(null)\n\n  useEffect(() => {\n    phonebookService\n      .getAll()\n        .then(initialPersons => {\n        setPersons(initialPersons)\n    })\n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    if (-1 === persons.findIndex(obj => obj.name === newName)){\n      const personObject = {\n        name: newName,\n        number: newNumber,\n      }\n      phonebookService\n        .createPerson(personObject)\n          .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setInfoMessage(`${newName} added to phonebook`)\n          setTimeout(() => {\n            setInfoMessage(null)\n          }, 5000)\n        })\n    }\n    else if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)){\n      const updatePerson = persons.find(obj => obj.name === newName)\n      const updatedPerson = {...updatePerson, number: newNumber}\n      phonebookService\n        .updatePerson(updatedPerson)\n          .then(() => {\n            phonebookService.getAll().then(newPersons => {setPersons(newPersons)})\n            setInfoMessage(`${newName}'s number updated`)\n            setTimeout(() => {\n              setInfoMessage(null)\n            }, 5000)\n          })\n    }\n    setNewName('')\n    setNewNumber('')\n    setFilter('')\n  }\n\n  const delPerson = (event, id) => {\n    event.preventDefault()\n    const toDelete = persons.find((obj) => obj.id===id)\n    if (window.confirm(\"Delete \" + toDelete.name)){\n      phonebookService\n        .deletePerson(toDelete.id)\n          .then(() => {\n            phonebookService.getAll().then(newPersons => {setPersons(newPersons)})\n            setInfoMessage(`${toDelete.name} deleted`)\n            setTimeout(() => {\n              setInfoMessage(null)\n            }, 5000)\n          })\n          .catch(error => {\n            setErrorMessage(`Information of ${toDelete.name} has already been removed from server`)\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n            setPersons(persons.filter(n => n.id !== id))\n          })\n    }\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilter = (event) => {\n    setFilter(event.target.value)\n  }\n\n  return (\n    <div>\n      <Notification message={infoMessage}/>\n      <Error message={errorMessage}/>\n      <h1>Phonebook</h1>\n      <FilterForm newFilter={newFilter} handleFilter={handleFilter}/>\n      <h2>add a new</h2>\n      <PersonForm addPerson={addPerson} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange}/>\n      <h2>Numbers</h2>\n      <NumberList persons={persons} filterstr={newFilter} delPerson={delPerson}/>\n    </div>\n  )\n}\n\nexport default App\n","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}